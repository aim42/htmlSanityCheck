<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<title>HTML Sanity Checker Architecture Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_html_sanity_checker_architecture_documentation">HTML Sanity Checker Architecture Documentation</a>
<ul class="sectlevel1">
<li><a href="#_goals_of_this_documentation">Goals of this Documentation</a>
<ul class="sectlevel2">
<li><a href="#_disclaimer">Disclaimer</a></li>
</ul>
</li>
<li><a href="#_introduction_and_goals">1. Introduction and Goals</a>
<ul class="sectlevel2">
<li><a href="#requirements">1.1. Requirements Overview</a>
<ul class="sectlevel3">
<li><a href="#_basic_usage">1.1.1. Basic Usage</a></li>
<li><a href="#_terminology_what_can_go_wrong_in_html_files">1.1.2. Terminology: What Can Go Wrong in HTML Files?</a></li>
<li><a href="#_general_functionality">1.1.3. General Functionality</a></li>
<li><a href="#requiredChecks">1.1.4. Types of Sanity Checks</a></li>
<li><a href="#_reporting_and_output_requirements">1.1.5. Reporting and Output Requirements</a></li>
</ul>
</li>
<li><a href="#quality-goals">1.2. Quality Goals</a></li>
<li><a href="#_stakeholder">1.3. Stakeholder</a></li>
<li><a href="#InformationOnUris">1.4. Background Information on URIs</a>
<ul class="sectlevel3">
<li><a href="#_intra_document_uris">1.4.1. Intra-Document URIs</a></li>
<li><a href="#_references_on_uris_and_html_syntax">1.4.2. References on URIs and HTML Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_constraints">2. Constraints</a></li>
<li><a href="#_context">3. Context</a>
<ul class="sectlevel2">
<li><a href="#_business_context">3.1. Business Context</a></li>
<li><a href="#_deployment_context">3.2. Deployment Context</a></li>
</ul>
</li>
<li><a href="#_solution_strategy">4. Solution Strategy</a></li>
<li><a href="#_building_block_view">5. Building Block View</a>
<ul class="sectlevel2">
<li><a href="#_whitebox_htmlsanitychecker">5.1. Whitebox HtmlSanityChecker</a>
<ul class="sectlevel3">
<li><a href="#checker_blackbox">5.1.1. <em>HSC Core</em> (Blackbox)</a></li>
</ul>
</li>
<li><a href="#_building_blocks_level_2">5.2. Building Blocks - Level 2</a>
<ul class="sectlevel3">
<li><a href="#__em_hsc_core_em_whitebox">5.2.1. <em>HSC-Core</em> (Whitebox)</a></li>
<li><a href="#_checker_and_xyzchecker_subclasses">5.2.2. Checker and xyzChecker Subclasses</a></li>
</ul>
</li>
<li><a href="#_building_blocks_level_3">5.3. Building Blocks - Level 3</a>
<ul class="sectlevel3">
<li><a href="#ResultsCollector">5.3.1. ResultsCollector (Whitebox)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_runtime_view">6. Runtime View</a></li>
<li><a href="#deployment-view">7. Deployment View</a></li>
<li><a href="#_technical_and_crosscutting_concepts">8. Technical and Crosscutting Concepts</a>
<ul class="sectlevel2">
<li><a href="#_html_checking_domain_model">8.1. HTML Checking Domain Model</a></li>
<li><a href="#gradle-plugin-concept">8.2. Gradle Plugin Concept and Development</a>
<ul class="sectlevel3">
<li><a href="#_directory_structure_and_required_files">8.2.1. Directory Structure and Required Files</a></li>
<li><a href="#_passing_parameters_from_buildfile_to_plugin">8.2.2. Passing Parameters From Buildfile to Plugin</a></li>
<li><a href="#_building_the_plugin">8.2.3. Building the Plugin</a></li>
<li><a href="#_uploading_to_public_archives">8.2.4. Uploading to Public Archives</a></li>
<li><a href="#_further_information_on_creating_gradle_plugins">8.2.5. Further Information on Creating Gradle Plugins</a></li>
</ul>
</li>
<li><a href="#checking-concept">8.3. Flexible Checking Algorithms</a>
<ul class="sectlevel3">
<li><a href="#MissingImageFilesChecker">8.3.1. MissingImageFilesChecker</a></li>
<li><a href="#MissingImgAltAttributeChecker">8.3.2. MissingImgAltAttributeChecker</a></li>
<li><a href="#BrokenCrossReferencesChecker">8.3.3. BrokenCrossReferencesChecker</a></li>
<li><a href="#DuplicateIdChecker">8.3.4. DuplicateIdChecker</a></li>
<li><a href="#MissingLocalResourcesChecker">8.3.5. MissingLocalResourcesChecker</a></li>
<li><a href="#BrokenExternalLinksChecker">8.3.6. BrokenExternalLinksChecker</a></li>
<li><a href="#IllegalLinkChecker">8.3.7. IllegalLinkChecker</a></li>
</ul>
</li>
<li><a href="#html-encapsulation">8.4. Encapsulate HTML Parsing</a></li>
<li><a href="#reporting-concept">8.5. Flexible Reporting</a>
<ul class="sectlevel3">
<li><a href="#_styling_the_reporting_output">8.5.1. Styling the Reporting Output</a></li>
<li><a href="#_copy_required_resources_to_output_directory">8.5.2. Copy Required Resources to Output Directory</a></li>
<li><a href="#_attributions">8.5.3. Attributions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_design_decisions">9. Design Decisions</a>
<ul class="sectlevel2">
<li><a href="#_checking_of_external_links_postponed">9.1. Checking of external links postponed</a></li>
<li><a href="#_html_parsing_with_jsoup">9.2. HTML Parsing with jsoup</a></li>
<li><a href="#_string_similarity_checking_with_a_href_http_wikipedia_org_wiki_jaro_e2_80_93winkler_distance_jaro_winkler_distance_a">9.3. String Similarity Checking with <a href="http://wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance">Jaro-Winkler-Distance</a></a></li>
</ul>
</li>
<li><a href="#_glossary">10. Glossary</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<!-- github ribbon thanx to https://github.com/blog/273-github-ribbons -->
<a href="https://github.com/aim42/htmlSanityCheck">
<img style="position: absolute; top: 0; right: 0; border: 0;"
src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67"
alt="Fork me on GitHub"
data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
</div>
</div>
<h1 id="_html_sanity_checker_architecture_documentation" class="sect0"><a class="anchor" href="#_html_sanity_checker_architecture_documentation"></a>HTML Sanity Checker Architecture Documentation</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><a class="image" href="http://github.com/arc42"><img src="./images/arc42-logo.png" alt="arc42"></a></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#169; This document uses material from the <a href="http://arc42.de" target="_blank">arc42 architecture
template</a>, freely available at <a href="http://github.com/arc42" target="_blank">http://github.com/arc42</a>.
</p><p class="tableblock"><span class="small">This material is open source and provided under the Creative Commons Sharealike 4.0 license.
It comes <strong>without any guarantee</strong>. Use on your own risk.
arc42 and its structure by Dr. Peter Hruschka and Dr. Gernot Starke.
Asciidoc version initiated by Markus Schärtel and Jürgen Krey,
completed and maintained by Ralf Müller and Gernot Starke.</span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><span class="small">Version 0.9.5-SNAPSHOT of 2015-07-09</span></p>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="http://img.shields.io/:license-ccsa4-green.svg" alt=":license-ccsa4-green" width="^"></a></span>
<span class="image"><a class="image" href="https://github.com/aim42/htmlSanityCheck/issues?q=is%3Aopen+is%3Aissue+label%3Abug"><img src="https://badge.waffle.io/aim42/htmlSanityCheck.png?label=bug&amp;title=bugs" alt="htmlSanityCheck" width="^"></a></span>
<span class="image"><a class="image" href="https://github.com/aim42/htmlSanityCheck/issues"><img src="http://img.shields.io/github/issues/aim42/htmlSanityCheck.svg" alt="htmlSanityCheck"></a></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Within the following text, the "Html Sanity Checker" shall be
abbreviated with <kbd>HtmlSC</kbd></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_goals_of_this_documentation"><a class="anchor" href="#_goals_of_this_documentation"></a>Goals of this Documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This documentation is an example of
<a href="http://github.com/arc42">arc42</a> documentation.</p>
</div>
<div class="paragraph">
<p>You may copy this documentation or parts of it for your own
projects. In such cases you must include a link or
reference to <a href="http://github.com/arc42">arc42</a> or <a href="http://github.com/aim42">aim42</a>
(we regard this as <em>fair-use</em>).</p>
</div>
<div class="paragraph">
<p>For real-world projects,
the relation of code and documentation is over-sized.</p>
</div>
<div class="sect2">
<h3 id="_disclaimer"><a class="anchor" href="#_disclaimer"></a>Disclaimer</h3>
<div class="paragraph">
<p>We provide absolutely <strong>no guarantee</strong>,
neither for the accuracy of this documentation
nor for any property or feature of the software described here.</p>
</div>
<div class="paragraph">
<p>Do not use this software in critical situations or projects.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_and_goals"><a class="anchor" href="#_introduction_and_goals"></a>1. Introduction and Goals</h2>
<div class="sectionbody">
<div class="paragraph">
<p><kbd>HtmlSC</kbd> shall support authors creating digital formats
with hyperlinks and integration of images and similar resources.</p>
</div>
<div class="sect2">
<h3 id="requirements"><a class="anchor" href="#requirements"></a>1.1. Requirements Overview</h3>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The overall goal of <kbd>HtmlSC</kbd> is to create neat and clear reports,
showing errors within HTML files - as shown in the adjoining figure.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><a class="image" href="images/sample-hsc-report.jpg"><img src="./images/sample-hsc-report.jpg" alt="sample-hsc-report" width="200" height="(click on thumbnail for details)"></a></span></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_basic_usage"><a class="anchor" href="#_basic_usage"></a>1.1.1. Basic Usage</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A user configures the location (directory and filename) of an HTML file,</p>
</li>
<li>
<p>and the corresponding images directory.</p>
</li>
<li>
<p><kbd>HtmlSC</kbd> performs various checks on the HTML and</p>
</li>
<li>
<p>reports its results either on the console or as HTML report.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><kbd>HtmlSC</kbd> can run from the command line or as <a href="http://gradle.org/">Gradle</a>-plugin.</p>
</div>
</div>
<div class="sect3">
<h4 id="_terminology_what_can_go_wrong_in_html_files"><a class="anchor" href="#_terminology_what_can_go_wrong_in_html_files"></a>1.1.2. Terminology: What Can Go Wrong in HTML Files?</h4>
<div class="paragraph">
<p>Apart from purely syntactical errors, many things can go wrong in html, especially with respect to hyperlinks, anchors and id&#8217;s - as those are often manually maintained.</p>
</div>
<div class="paragraph">
<p>Primary sources of problems are bad links (in technical terms: URIs). For further information, see the <a href="#InformationOnUris">background information on URIs</a>.</p>
</div>
<div class="paragraph">
<div class="title">Broken Cross References:: Cross-references (internal links) can be broken, e.g. due to missing or misspelled link-targets.</div>
<p>See <a href="#BrokenCrossReferencesChecker">BrokenCrossReferencesChecker</a></p>
</div>
<div class="paragraph">
<div class="title">Missing image files: Referenced image files can be missing or misspelled.</div>
<p>See <a href="#MissingImageFilesChecker">MissingImageFilesChecker</a>.</p>
</div>
<div class="paragraph">
<div class="title">Missing local resources: Referenced local resources (other than images) can be missing or misspelled.</div>
<p>See <a href="#MissingLocalResourcesChecker">MissingLocalResourcesChecker</a></p>
</div>
<div class="paragraph">
<div class="title">Duplicate link targets: link-targets can occur several times with the same name - so the browser cannot know which is the desired target.</div>
<p>See <a href="#DuplicateIdChecker">DuplicateIdChecker</a>.</p>
</div>
<div class="paragraph">
<div class="title">Broken external links: External links can be broken due to myriads of reasons: misspelled, link-target currently offline, illegal link syntax.</div>
<p>See <a href="#BrokenExternalLinksChecker">BrokenExternalLinksChecker</a>.</p>
</div>
<div class="paragraph">
<div class="title">Missing Alt Attribute in Image Tags: Images missing an alt-attribute.</div>
<p>See <a href="#MissingImgAltAttributeChecker">MissingImgAltAttributeChecker</a>.</p>
</div>
<div class="paragraph">
<p>Checking and reporting these errors and flaws is the central <em>business requirement</em> of <kbd>HtmlSC</kbd>.</p>
</div>
<div class="paragraph">
<p>Important terms (<strong>domain terms</strong>) of html sanity checking is documented in a (small)
<a href="#_html_checking_domain_model">domain model</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_general_functionality"><a class="anchor" href="#_general_functionality"></a>1.1.3. General Functionality</h4>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. General Requirements</caption>
<colgroup>
<col style="width: 8%;">
<col style="width: 25%;">
<col style="width: 66%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Functionality</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read HTML file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>HtmlSC</kbd> shall read a single (configurable)
                        HTML file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://gradle.org/">Gradle</a>-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>HtmlSC</kbd> can be run as <a href="http://gradle.org/">Gradle</a>-plugin.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G-3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">command line usage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>HtmlSC</kbd> can be called from the command line with arguments and options</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G-4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">configurable output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">output can be configured to console or file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G-5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">free and open source</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all required dependencies shall be compliant
                               to the <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-SA-4 licence</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G-6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">available via public repositories</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">like bintray or jcenter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G-7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">configurable to check multiple HTML files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">configure a set of files to be processes in a single <em>run</em> and produce a joint report. (useful for e.g. API documentation with many HTML files referencing each other)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="requiredChecks"><a class="anchor" href="#requiredChecks"></a>1.1.4. Types of Sanity Checks</h4>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Required Checks</caption>
<colgroup>
<col style="width: 8%;">
<col style="width: 25%;">
<col style="width: 66%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Check</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">missing image files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check all image tags if the referenced
                                  image files exist.
                                  See <a href="#MissingImageFilesChecker">MissingImageFilesChecker</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">broken internal links</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check all internal links from anchor-tags
                                  (href="#XYZ") if the link targets "XYZ" are defined.
                                  See <a href="#BrokenCrossReferencesChecker">BrokenCrossReferencesChecker</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R-3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">missing local files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">either other html-files, pdf&#8217;s or similar.
                                  See <a href="#MissingLocalResourcesChecker">MissingLocalResourcesChecker</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R-4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">duplicate link targets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check all bookmark definitions
                                  (&#8230;&#8203; id="XYZ") whether the id&#8217;s ("XYZ") are unique.
                                  See <a href="#DuplicateIdChecker">DuplicateIdChecker</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R-5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">malformed links</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check all links for syntactical correctness</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R-6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">missing alt-attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in image-tags.  See <a href="#MissingImgAltAttributeChecker">MissingImgAltAttributeChecker</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R-7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unused-images</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check for files in image-directories that are not referenced by any
                                  of the HTML files in this <em>run</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R-8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">illegal link targets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check for malformed or illegal anchors (link targets).</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Optional Checks</caption>
<colgroup>
<col style="width: 8%;">
<col style="width: 25%;">
<col style="width: 66%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Check</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opt-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">missing external images</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check externally referenced images for availability</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opt-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">broken external links</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check external links for both syntax and availability</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_reporting_and_output_requirements"><a class="anchor" href="#_reporting_and_output_requirements"></a>1.1.5. Reporting and Output Requirements</h4>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Reporting Requirements</caption>
<colgroup>
<col style="width: 8%;">
<col style="width: 25%;">
<col style="width: 66%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">various output formats</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checking output in plain text and HTML</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">output to stdout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>HtmlSC</kbd> can output results on stdout (the console)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R-3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">configurable file output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>HtmlSC</kbd> can store results in file in configurable directories</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="quality-goals"><a class="anchor" href="#quality-goals"></a>1.2. Quality Goals</h3>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. Quality-Goals</caption>
<colgroup>
<col style="width: 11%;">
<col style="width: 22%;">
<col style="width: 66%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Priority</th>
<th class="tableblock halign-left valign-top">Quality-Goal</th>
<th class="tableblock halign-left valign-top">Scenario</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correctness</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Every broken internal link (cross reference) is found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correctness</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Every missing local image is found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flexibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiple checking algorithms, report formats and clients. At least
Gradle, command-line and a graphical client have to be supported.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Safety</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content of the files to be checked is <em>never</em> altered.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correctness</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correctness of every checker is automatically tested for positive AND negative
                            cases</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correctness</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Every reporting format is tested: Reports must exactly reflect checking results.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check of 100kB html file performed under 10 secs
(excluding gradle startup)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_stakeholder"><a class="anchor" href="#_stakeholder"></a>1.3. Stakeholder</h3>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 6. Stakeholder</caption>
<colgroup>
<col style="width: 18%;">
<col style="width: 36%;">
<col style="width: 45%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Goal, Intention</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentation author</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">writes documentation with Html output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wants to check that the resulting document contains good links, image references</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="arc42_user"></a> arc42 user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uses the arc42 template for architecture documentation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wants a small but practical example of <em>how to apply arc42</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">aim42 contributor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contributes to aim42 methode-guide</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">check generated html code to ensure links and images are correct during
(gradle-based) build process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">software developer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wants an example of pragmatic architecture documentation and arc42 usage</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="InformationOnUris"><a class="anchor" href="#InformationOnUris"></a>1.4. Background Information on URIs</h3>
<div class="paragraph">
<p>The generic structure of a Uniform Resource Identifier consists of
the following parts:
[type][://][subdomain][domain][port][path][file][query][hash]</p>
</div>
<div class="paragraph">
<p>An example, visualized:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/uri-generic-example.png" alt="uri generic example">
</div>
</div>
<div class="paragraph">
<p>The <code>java.net.URL</code> class contains a generic parser for URLs and URIs.
See the following snippet, taken from the unit test class <code>URLUtilTest.groovy</code>:</p>
</div>
<div class="listingblock">
<div class="title">Generic URI Structure</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> testGenericURISyntax() {
        <span class="comment">// based upon an example from the Oracle(tm) Java tutorial:</span>
        <span class="comment">// http://docs.oracle.com/javase/tutorial/networking/urls/urlInfo.html</span>
        <span class="keyword">def</span> aURL =
                <span class="keyword">new</span> <span class="predefined-type">URL</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com:42/docs/tutorial/index.html?name=aim42#INTRO</span><span class="delimiter">&quot;</span></span>);
        aURL.with {
            <span class="keyword">assert</span> getProtocol() == <span class="string"><span class="delimiter">&quot;</span><span class="content">http</span><span class="delimiter">&quot;</span></span>
            <span class="keyword">assert</span> getAuthority() == <span class="string"><span class="delimiter">&quot;</span><span class="content">example.com:42</span><span class="delimiter">&quot;</span></span>
            <span class="keyword">assert</span> getHost() == <span class="string"><span class="delimiter">&quot;</span><span class="content">example.com</span><span class="delimiter">&quot;</span></span>
            <span class="keyword">assert</span> getPort() == <span class="integer">42</span>
            <span class="keyword">assert</span> getPath() == <span class="string"><span class="delimiter">&quot;</span><span class="content">/docs/tutorial/index.html</span><span class="delimiter">&quot;</span></span>
            <span class="keyword">assert</span> getQuery() == <span class="string"><span class="delimiter">&quot;</span><span class="content">name=aim42</span><span class="delimiter">&quot;</span></span>
            <span class="keyword">assert</span> getRef() == <span class="string"><span class="delimiter">&quot;</span><span class="content">INTRO</span><span class="delimiter">&quot;</span></span>
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>URIs are used to <strong>reference</strong> other resources.
For  <kbd>HtmlSC</kbd> it is useful to distinguish between internal (== local)and external references:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Internal references, a.k.a. Cross-References</p>
</li>
<li>
<p>External references</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_intra_document_uris"><a class="anchor" href="#_intra_document_uris"></a>1.4.1. Intra-Document URIs</h4>
<div class="paragraph">
<p>a file&#8230;&#8203; ref can be an internal link, or a URI without protocol&#8230;&#8203;</p>
</div>
</div>
<div class="sect3">
<h4 id="_references_on_uris_and_html_syntax"><a class="anchor" href="#_references_on_uris_and_html_syntax"></a>1.4.2. References on URIs and HTML Syntax</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.ietf.org/rfc/rfc2396.txt">IETF RFC-2396 on URI Syntax</a>: The
fundamental reference!</p>
</li>
<li>
<p><a href="http://www.w3.org/TR/html401/struct/links.html#h-12.2.4">W3C HTML Reference</a></p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax">Wikipedia on URI-Schemes</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_constraints"><a class="anchor" href="#_constraints"></a>2. Constraints</h2>
<div class="sectionbody">
<div class="paragraph">
<p><kbd>HtmlSC</kbd> shall be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>platform-independent and should run on the major operating systems
(Windows&#8482;, Linux, and Mac-OS&#8482;)</p>
</li>
<li>
<p>integrated with the Gradle build tool</p>
</li>
<li>
<p>runnable from the command line</p>
</li>
<li>
<p>developed under a liberal open-source license</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_context"><a class="anchor" href="#_context"></a>3. Context</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_business_context"><a class="anchor" href="#_business_context"></a>3.1. Business Context</h3>
<div class="imageblock">
<div class="content">
<img src="./images/hsc-context.png" alt="Business Context">
</div>
<div class="title">Figure 1. Business Context</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 7. Business Context</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Neighbor</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">documents software with toolchain that generates html. Wants to ensure that
links within this html are valid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">build system</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">local html files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>HtmlSC</kbd> reads and parses local html files and
performs sanity checks within those.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">local image files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>HtmlSC</kbd> checks if linked images exist as (local) files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">external web resources</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>HtmlSC</kbd> can be configured to optionally check for the existence
of external web resources. Due to the nature of web systems, this check might need a significant
amount of time and might yield invalid results due to network and latency issues.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_deployment_context"><a class="anchor" href="#_deployment_context"></a>3.2. Deployment Context</h3>
<div class="paragraph">
<p>The following diagram shows the participating computers ({node}) with their technical connections plus the major {artifact} of <kbd>HtmlSC</kbd>, the hsc-plugin-binary.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/deployment-context.png" alt="Deployment Context">
</div>
<div class="title">Figure 2. Deployment Context</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 8. Deployment Context</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node / Artifact</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{node} hsc-development</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">where development of <kbd>HtmlSC</kbd> takes place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{artifact} hsc-plugin-binary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">compiled and packaged version of <kbd>HtmlSC</kbd> including required dependencies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{node} artifact repository (<a href="https://bintray.com/bintray/jcenter">Bintray</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">global public <em>cloud</em> repository for binary artifacts, similar to <a href="http://search.maven.org/">mavenCentral</a>.  <kbd>HtmlSC</kbd> binaries are uploaded to this server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{node} hsc user computer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">where arbitrary documentation takes place with html as output formats.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{artifact} build.gradle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gradle build script configuring (among other things) the <kbd>HtmlSC</kbd> plugin to perform the Html checking.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Details see <a href="#deployment-view">deployment view</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_solution_strategy"><a class="anchor" href="#_solution_strategy"></a>4. Solution Strategy</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Implement <kbd>HtmlSC</kbd> in <a href="http://groovy.codehaus.org/">Groovy</a> and Java with minimal
external dependencies. Wrap this implementation into a <a href="http://gradle.org/">Gradle</a>
plugin, so it can be used within automated builds. Details are given
in the <a href="#gradle-plugin-concept">Gradle plugin concept</a>.</p>
</li>
<li>
<p>Apply the <em>template-method-pattern</em> (see e.g. <a href="http://sourcemaking.com/design_patterns/template_method/">Template-Method-Pattern</a>) to enable:</p>
<div class="ulist">
<ul>
<li>
<p>multiple checking algorithms. See the <a href="#checking-concept">concept for checking algorithms</a>,</p>
</li>
<li>
<p>both HTML (file) and text (console) output. See the <a href="#reporting-concept">reporting concept</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_block_view"><a class="anchor" href="#_building_block_view"></a>5. Building Block View</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_whitebox_htmlsanitychecker"><a class="anchor" href="#_whitebox_htmlsanitychecker"></a>5.1. Whitebox HtmlSanityChecker</h3>
<div class="imageblock">
<div class="content">
<img src="./images/hsc-whitebox.png" alt="Whitebox">
</div>
<div class="title">Figure 3. Whitebox (Overall system)</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Rationale</dt>
<dd>
<p>We used <em>functional decomposition</em> to separate responsibilities:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#checker_blackbox">CheckerCore</a> shall encapsulate checking logic and Html parsing/processing.</p>
</li>
<li>
<p>all kinds of outputs (console, html-file, graphical) shall be handled in a separate component
(<code>Reporter</code>)</p>
</li>
<li>
<p>Implementation of Gradle specific stuff shall be encapsulated.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Contained Blackboxes</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 9. HtmlSanityChecker building blocks</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#checker_blackbox">HSC_Core</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hsc_core: html parsing and sanity checking, file handling</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HSC Gradle Plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integrates the Gradle build tool with <kbd>HtmlSC</kbd>,
enabling arbitrary gradle builds to use <kbd>HtmlSC</kbd> functionality.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HSC Command Line Interface</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> (not documented)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HSC Graphical Interface</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(planned, not implemented)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reporter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">outputs the collected checking results to configurable
destinations e.g., stdout or a Html file.</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Interfaces</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 10. HtmlSanityChecker internal interfaces</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Interface</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">usage via shell</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#arc42_user">arc42 user</a> uses a command
line shell to call the <kbd>HtmlSC</kbd></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">build system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> currently restricted to Gradle: The build
system uses <kbd>HtmlSC</kbd> as configured in the buildscript.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">local-html and local-images</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>HtmlSC</kbd> needs access to several
local files, especially the html page to be checked and to the
corresponding image directories.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="checker_blackbox"><a class="anchor" href="#checker_blackbox"></a>5.1.1. <em>HSC Core</em> (Blackbox)</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Intent/Responsibility</dt>
<dd>
<p>HSC_Core contains the core functions
to perform the various sanity checks. It parses the html file
into a DOM-like in-memory representation, which is then
used to perform the actual checks.</p>
</dd>
<dt class="hdlist1">Interfaces</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 11. HSC_Core Interfaces</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 66%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Interface (From-To)</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command Line Interface &#8594; Checker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> Uses the #AllChecksRunner class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gradle Plugin &#8594; Checker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes <kbd>HtmlSC</kbd> via a standard Gradle plugin,
as described in the Gradle user guide.</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Files</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>org.aim42.htmlsanitycheck.AllChecksRunner</p>
</li>
<li>
<p>org.aim42.htmlsanitycheck.HtmlSanityCheckGradlePlugin</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_blocks_level_2"><a class="anchor" href="#_building_blocks_level_2"></a>5.2. Building Blocks - Level 2</h3>
<div class="sect3">
<h4 id="__em_hsc_core_em_whitebox"><a class="anchor" href="#__em_hsc_core_em_whitebox"></a>5.2.1. <em>HSC-Core</em> (Whitebox)</h4>
<div class="imageblock">
<div class="content">
<img src="./images/hsc-core.png" alt="Whitebox">
</div>
<div class="title">Figure 4. HSC-Core (Whitebox)</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Rationale</dt>
<dd>
<p>This structures follows a strictly functional decomposition:</p>
<div class="ulist">
<ul>
<li>
<p>parsing and handling html input</p>
</li>
<li>
<p>checking</p>
</li>
<li>
<p>collecting checking results</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Contained Blackboxes</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 12. HSC-Core building blocks</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Abstract class, used in form of the template-pattern. Shall be subclassed
for all checking algorithms.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AllChecksRunner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Facade to the different Checker instances. Provides a (parameter-driven)
command-line interface.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ResultsCollector">ResultsCollector (Whitebox)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collects all checking results. Its interface <code>Results</code> is contained in the
<a href="#ResultsCollector">whitebox description</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reporter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reports checking results to either console or an html file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HtmlParser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encapsulates html parsing, provides methods to search
within the (parsed) html.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Suggester</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In case of checking issues, suggests alternatives by comparing the faulty element
to the one present in the html file. Currently not implemented</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_checker_and_xyzchecker_subclasses"><a class="anchor" href="#_checker_and_xyzchecker_subclasses"></a>5.2.2. Checker and xyzChecker Subclasses</h4>
<div class="paragraph">
<p>The abstract Checker provides a uniform interface (<code>public void check()</code>)
to different checking algorithms. It is based upon the <a href="#checking-concept">concept of extensible checking algorithms</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_blocks_level_3"><a class="anchor" href="#_building_blocks_level_3"></a>5.3. Building Blocks - Level 3</h3>
<div class="sect3">
<h4 id="ResultsCollector"><a class="anchor" href="#ResultsCollector"></a>5.3.1. ResultsCollector (Whitebox)</h4>
<div class="imageblock">
<div class="content">
<img src="./images/ResultsCollector.png" alt="Whitebox">
</div>
<div class="title">Figure 5. Results Collector (Whitebox)</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Rationale</dt>
<dd>
<p>This structures follows the hierarchy of checks - namely managing results for:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>a number of pages/documents, containing:</p>
</li>
<li>
<p>a single page, each containing many</p>
</li>
<li>
<p>single checks within a page</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Contained Blackboxes</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 13. ResultsCollector building blocks</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Per-Run Results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">results for potentially many Html pages/documents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single-Page-Results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">results for a single page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single-Check-Results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">results for a single type of check (e.g. missing-images check)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a single finding, (e.g. "image 'logo.png' missing"). Can hold suggestions
and (planned for future releases) the responsible html element.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_interface_code_results_code"><a class="anchor" href="#_interface_code_results_code"></a>Interface <code>Results</code></h5>
<div class="paragraph">
<p>The <code>Result</code> interface is used by all clients
(especially <code>Reporter</code> subclasses, graphical and command-line
clients) to access checking results. It consists of three distinct APIs for
overall <code>RunResults</code>, single-page results (<code>PageResults</code>) and single-check results
(<code>CheckResults</code>). See the interface definitions below - taken from the Groovy-
 source code:</p>
</div>
<div class="listingblock">
<div class="title">Interface RunResults</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">public</span> <span class="type">interface</span> RunResults {

    <span class="comment">// returns results for all pages which have been checked</span>
    <span class="directive">public</span> <span class="predefined-type">ArrayList</span>&lt;SinglePageResults&gt; getResultsForAllPages()

    <span class="comment">// how many pages were checked in this run?</span>
    <span class="directive">public</span> <span class="type">int</span> nrOfPagesChecked()

    <span class="comment">// how many checks were performed in all?</span>
    <span class="directive">public</span> <span class="type">int</span> nrOfChecksPerformedOnAllPages()

    <span class="comment">// how many findings (errors and issues) were found in all?</span>
    <span class="directive">public</span> <span class="type">int</span> nrOfFindingsOnAllPages()

    <span class="comment">// how long took checking (in milliseconds)?</span>
    <span class="directive">public</span> <span class="predefined-type">Long</span> checkingTookHowManyMillis()
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Interface PageResults</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">public</span> <span class="type">interface</span> PageResults {

    <span class="comment">// what's the title of this page?</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getPageTitle()

    <span class="comment">// what's the filename and path?</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getPageFileName()
    <span class="directive">public</span> <span class="predefined-type">String</span> getPageFilePath()

    <span class="comment">// how many items have been checked?</span>
    <span class="directive">public</span> <span class="type">int</span> nrOfItemsCheckedOnPage()

    <span class="comment">// how many problems were found on this page?</span>
    <span class="directive">public</span> <span class="type">int</span> nrOfFindingsOnPage()

    <span class="comment">// how many different checks have run on this page?</span>
    <span class="directive">public</span> <span class="type">int</span> howManyCheckersHaveRun()
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Interface CheckResults</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">public</span> <span class="type">interface</span> CheckResults {

    <span class="comment">// return a description of what is checked</span>
    <span class="comment">// (e.g. &quot;Missing Images Checker&quot; or &quot;Broken Cross-References Checker&quot;</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> description()

    <span class="comment">// returns all findings/problems found during this check</span>
    <span class="directive">public</span>  <span class="predefined-type">ArrayList</span>&lt;Finding&gt; getFindings()
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_runtime_view"><a class="anchor" href="#_runtime_view"></a>6. Runtime View</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Not appropriate for this system due to very simple implementation.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deployment-view"><a class="anchor" href="#deployment-view"></a>7. Deployment View</h2>
<div class="sectionbody">
<div id="img-deployment" class="imageblock">
<div class="content">
<img src="./images/hsc-deployment.png" alt="Deployment">
</div>
<div class="title">Figure 6. Deployment</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 14. Deployment</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node / Artifact</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hsc plugin binary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">compiled version of <kbd>HtmlSC</kbd>, including required dependencies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hsc-development</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">where development of <kbd>HtmlSC</kbd> takes place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">artifact repository (<a href="https://bintray.com/bintray/jcenter">Bintray</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">global public <em>cloud</em> repository for binary artifacts, similar to <a href="http://search.maven.org/">mavenCentral</a>.  <kbd>HtmlSC</kbd> binaries are uploaded to this server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hsc user computer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">where arbitrary documentation takes place with html as output formats.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">build.gradle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gradle build script configuring (among other things) the <kbd>HtmlSC</kbd> plugin to check <em>some documentation</em>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The three nodes (<em>computers</em>) shown in <a href="#img-deployment">Deployment</a> are connected via Internet.</p>
</div>
<div class="paragraph">
<p>Sanity checker will:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>be bundled as a single jar,</p>
</li>
<li>
<p>be uploaded to the Bintray repository,</p>
</li>
<li>
<p>referencable within a gradle buildfile,</p>
</li>
<li>
<p>provide a main method with parameters and options, so all checks can be
called from the command line.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_technical_and_crosscutting_concepts"><a class="anchor" href="#_technical_and_crosscutting_concepts"></a>8. Technical and Crosscutting Concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_html_checking_domain_model"><a class="anchor" href="#_html_checking_domain_model"></a>8.1. HTML Checking Domain Model</h3>
<div class="imageblock">
<div class="content">
<img src="./images/HTML_Checking_Domain.png" alt="HTML Checking Domain Model">
</div>
<div class="title">Figure 7. HTML Checking Domain Model</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 15. Domain Model</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anchor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Html element to create &#8594;Links. Contains link-target in the form <code>&lt;a href="link-target"&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cross Reference</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link from one part of the document to another part within the same document.
                       A special form of &#8594;Internal Link, with a &#8594;Link Target in the same document.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">External Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to another page or resource at another domain.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of a problem found by one &#8594;Checker within the &#8594;Html Page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Html Element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTML pages (documents) are made up by HTML elements .e.g., <code>&lt;a href="link target"&gt;</code>, <code>&lt;img src="image.png"&gt;</code> and others. See the <a href="http://www.w3schools.com/html/html_elements.asp">W3-Consortium</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Html Page</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A single chunk of HTML, mostly regarded as a single file. Shall comply
					   to standard HTML syntax. Minimal requirement: Our HTML parser can successfully parse this page. Contains &#8594;Html Elements. Also called <em>Html Document</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier for a specific part of a document, e.g. <code>&lt;h2 id="#someHeader"&gt;</code>.
						Often used to describe &#8594;Link Targets.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Internal Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to another section of the same page or to another page of the same domain.
						Also called <em>Local Link</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any a reference in the &#8594;Html Page that lets you display or activate another
                        part of this document (&#8594;Internal Link) or another document, image or resource
                        (can be either &#8594;Internal (local) or &#8594;External Link).
                        Every link leads from the <em>Link Source</em> to the <em>Link Target</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link Target</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The target of any &#8594;Link, e.g. heading or any other a part of
					 a &#8594;Html Document, any internal or external resource (identified by URI). Expressed by &#8594;id</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local Resource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">local file, either other Html files or other types (e.g. pdf, docx)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run Result</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The overall results of checking a number of pages (at least one page).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single Page Result</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A collection of all checks of a single &#8594;Html Page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Universal Resource Identifier. Defined in <a href="http://www.ietf.org/rfc/rfc2396.txt">RFC-2396</a>. The ultimate source of truth concerning link syntax and semantic.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="gradle-plugin-concept"><a class="anchor" href="#gradle-plugin-concept"></a>8.2. Gradle Plugin Concept and Development</h3>
<div class="paragraph">
<p>You should definitely read the original <a href="https://gradle.org/docs/current/userguide/userguide.html">Gradle User Guide</a> on custom plugin development.</p>
</div>
<div class="paragraph">
<p>To enable the <a href="#requirements">required Gradle integration</a>,
we implement a lean wrapper as described in the Gradle user guide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">HtmlSanityCheckPlugin</span> <span class="directive">implements</span> Plugin&lt;Project&gt; {
    <span class="type">void</span> apply(Project project) {
        project.task(<span class="string"><span class="delimiter">'</span><span class="content">htmlSanityCheck</span><span class="delimiter">'</span></span>,
                <span class="key">type</span>: HtmlSanityCheckTask,
                <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">Check</span><span class="delimiter">'</span></span>)
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_directory_structure_and_required_files"><a class="anchor" href="#_directory_structure_and_required_files"></a>8.2.1. Directory Structure and Required Files</h4>
<div class="listingblock">
<div class="content">
<pre>|-htmlSanityCheck
   |  |-src
   |  |  |-main
   |  |  |  |-org
   |  |  |  |  |-aim42
   |  |  |  |  |  |-htmlsanitycheck
   |  |  |  |  |  |  | ...
   |  |  |  |  |  |  |-HtmlSanityCheckPlugin.groovy <i class="conum" data-value="1"></i><b>(1)</b>
   |  |  |  |  |  |  |-HtmlSanityCheckTask.groovy
   |  |  |  |-resources
   |  |  |  |  |-META-INF                          <i class="conum" data-value="2"></i><b>(2)</b>
   |  |  |  |  |  |-gradle-plugins
   |  |  |  |  |  |  |-htmlSanityCheck.properties  <i class="conum" data-value="3"></i><b>(3)</b>
   |  |  |-test
   |  |  |  |-org
   |  |  |  |  |-aim42
   |  |  |  |  |  |-htmlsanitycheck
   |  |  |  |  |  |  | ...
   |  |  |  |  |  |  |-HtmlSanityCheckPluginTest
   |</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the actual plugin code: <code>HtmlSanityCheckPlugin.groovy</code> and
<code>HtmlSanityCheckTask.groovy</code> groovy files</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Gradle expects plugin properties in <code>META-INF</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>property file containing the name of the actual implementation class:
<code>implementation-class=org.aim42.htmlsanitycheck.HtmlSanityCheckPlugin</code></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_passing_parameters_from_buildfile_to_plugin"><a class="anchor" href="#_passing_parameters_from_buildfile_to_plugin"></a>8.2.2. Passing Parameters From Buildfile to Plugin</h4>
<div class="paragraph">
<p>To be done</p>
</div>
</div>
<div class="sect3">
<h4 id="_building_the_plugin"><a class="anchor" href="#_building_the_plugin"></a>8.2.3. Building the Plugin</h4>
<div class="paragraph">
<p>The plugin code itself is built with gradle.</p>
</div>
</div>
<div class="sect3">
<h4 id="_uploading_to_public_archives"><a class="anchor" href="#_uploading_to_public_archives"></a>8.2.4. Uploading to Public Archives</h4>

</div>
<div class="sect3">
<h4 id="_further_information_on_creating_gradle_plugins"><a class="anchor" href="#_further_information_on_creating_gradle_plugins"></a>8.2.5. Further Information on Creating Gradle Plugins</h4>
<div class="paragraph">
<p>Although writing plugins is described in the Gradle user guide,
a clearly explained sample is given in a
<a href="http://code4reference.com/2012/08/gradle-custom-plugin-part-2/">Code4Reference</a> tutorial.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="checking-concept"><a class="anchor" href="#checking-concept"></a>8.3. Flexible Checking Algorithms</h3>
<div class="paragraph">
<p><kbd>HtmlSC</kbd> uses the {template-method-pattern} to enable flexible checking algorithms:</p>
</div>
<div class="quoteblock">
<blockquote>
The Template Method defines a skeleton of an algorithm in an operation, and defers some steps to subclasses.
</blockquote>
<div class="attribution">
&#8212; http://sourcemaking.com/design_patterns/template_method
</div>
</div>
<div class="paragraph">
<p>We achieve that by defining the skeleton of the checking algorithm in one operation, deferring the specific checking algorithm steps to subclasses.</p>
</div>
<div class="paragraph">
<p>The invariant steps are implemented in the abstract base class, while the variant checking algorithms have to be provided by the subclasses.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">/**
  * template method for performing a single type of checks
  * on the given @see HtmlPage.
  *
  * Prerequisite: pageToCheck has been successfully parsed,
  * prior to constructing this Checker instance.
**/</span>
<span class="directive">public</span> CheckingResultsCollector performCheck() {
    <span class="comment">// assert prerequisite</span>
    <span class="keyword">assert</span> pageToCheck != <span class="predefined-constant">null</span>
    initResults()
    <span class="keyword">return</span> check() <span class="comment">// execute the actual checking algorithm</span>
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/template-method.png" alt="Template Method">
</div>
<div class="title">Figure 8. Template-Method Overview</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 16. Template Method</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>abstract</em> base class, containing the template method check()
                                        plus the public method performCheck()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MissingImageFilesChecker">MissingImageFilesChecker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checks if referenced local image files exist</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MissingImgAltAttributeChecker">MissingImgAltAttributeChecker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checks if there are image tags without alt-attributes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#BrokenCrossReferencesChecker">BrokenCrossReferencesChecker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checks if cross references (links referenced within the page) exist</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#DuplicateIdChecker">DuplicateIdChecker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checks if any id has multiple definitions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MissingLocalResourcesChecker">MissingLocalResourcesChecker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checks if referenced other resources exist</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#BrokenExternalLinksChecker">BrokenExternalLinksChecker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checks if external links are valid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#IllegalLinkChecker">IllegalLinkChecker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checks if links do not violate HTML link syntax</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="MissingImageFilesChecker"><a class="anchor" href="#MissingImageFilesChecker"></a>8.3.1. MissingImageFilesChecker</h4>
<div class="paragraph">
<p><span class="small">Addresses requirement <a href="#requiredChecks">R-1</a>.</span></p>
</div>
<div class="paragraph">
<p>Checks if image files referenced in &lt;img src="someFile.jpg"&gt; really
exists on the local file system.</p>
</div>
<div class="paragraph">
<p>The (little) problem with checking images is their path: Consider the following
HTML fragment (from the file testme.html):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./images/one-image.jpg</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This image file ("one-image.jpg") has to be located relative to the directory
containing the corresponding HTML file.</p>
</div>
<div class="paragraph">
<p>Therefore the expected absolute path of the "one-image.jpg" has to be determined
from the absolute path of the html file under test.</p>
</div>
<div class="paragraph">
<p>We check for existing files using the usual Java API, but have to do some
<em>directory arithmetic</em> to get the absolutePathToImageFile:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">File</span> f = <span class="keyword">new</span> <span class="predefined-type">File</span>( absolutePathToImageFile );
<span class="keyword">if</span>(f.exists() &amp;&amp; !f.isDirectory())</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="MissingImgAltAttributeChecker"><a class="anchor" href="#MissingImgAltAttributeChecker"></a>8.3.2. MissingImgAltAttributeChecker</h4>
<div class="paragraph">
<p><span class="small">Addresses requirement <a href="#requiredChecks">R-6</a>.</span></p>
</div>
<div class="paragraph">
<p>Simple syntactic check: iterates over all &lt;img&gt; tags to check
if the image has an alt-tag.</p>
</div>
</div>
<div class="sect3">
<h4 id="BrokenCrossReferencesChecker"><a class="anchor" href="#BrokenCrossReferencesChecker"></a>8.3.3. BrokenCrossReferencesChecker</h4>
<div class="paragraph">
<p><span class="small">Addresses requirement <a href="#requiredChecks">R-2</a>.</span></p>
</div>
<div class="paragraph">
<p>Cross references are document-internal links where the href="link-target" from the html anchor
tag has no prefix like +http, https, ftp, telnet, mailto, file and such.</p>
</div>
<div class="paragraph">
<p>Only links with prefix # shall be taken into account, e.g. &lt;a href="#internalLink"&gt;.</p>
</div>
</div>
<div class="sect3">
<h4 id="DuplicateIdChecker"><a class="anchor" href="#DuplicateIdChecker"></a>8.3.4. DuplicateIdChecker</h4>
<div class="paragraph">
<p><span class="small">Addresses requirement <a href="#requiredChecks">R-4</a>.</span></p>
</div>
<div class="paragraph">
<p>Sections, especially headings, can be made link-targets by adding the id="#xyz" element,
yielding for example html headings like the following example.</p>
</div>
<div class="paragraph">
<p>Problems occur if the same link target is defined several times (also shown below).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;h2</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">seealso</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>First Heading<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;h2</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">seealso</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Second Heading<span class="tag">&lt;/h2&gt;</span>
<span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#seealso</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Duplicate definition - where shall I go now?<span class="tag">&lt;/a&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="MissingLocalResourcesChecker"><a class="anchor" href="#MissingLocalResourcesChecker"></a>8.3.5. MissingLocalResourcesChecker</h4>
<div class="paragraph">
<p><span class="small">Addresses requirement <a href="#requiredChecks">R-3</a>.</span></p>
</div>
<div class="paragraph">
<p>Current limitation: Does <strong>NOT</strong> check references-with-anchors of the following form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">api/core/Artifact.html#mvcGroupInit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>GroupInit<span class="tag">&lt;/a&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>containing both a local (file) reference plus an internal anchor #mvcGroupInit</p>
</div>
</div>
<div class="sect3">
<h4 id="BrokenExternalLinksChecker"><a class="anchor" href="#BrokenExternalLinksChecker"></a>8.3.6. BrokenExternalLinksChecker</h4>
<div class="paragraph">
<p><span class="small">Addresses requirement <a href="#requiredChecks">R-9</a>.</span></p>
</div>
<div class="paragraph">
<p>Problem here are networking issues, latency and HTTP return codes. This checker is planned,
but currently not implemented.</p>
</div>
</div>
<div class="sect3">
<h4 id="IllegalLinkChecker"><a class="anchor" href="#IllegalLinkChecker"></a>8.3.7. IllegalLinkChecker</h4>
<div class="paragraph">
<p><span class="small">Addresses requirement <a href="#requiredChecks">R-5</a>.</span></p>
</div>
<div class="paragraph">
<p>This checker is planned, but currently not implemented.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="html-encapsulation"><a class="anchor" href="#html-encapsulation"></a>8.4. Encapsulate HTML Parsing</h3>
<div class="paragraph">
<p>We encapsulate the third-party HTML parser (<a href="http://jsoup.org" class="bare">http://jsoup.org</a>) in
simple wrapper classes with interfaces specific to our different
checking algorithms.</p>
</div>
</div>
<div class="sect2">
<h3 id="reporting-concept"><a class="anchor" href="#reporting-concept"></a>8.5. Flexible Reporting</h3>
<div class="paragraph">
<p><kbd>HtmlSC</kbd> allows for different output formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>formats (HTML and text) and</p>
</li>
<li>
<p>destinations (file and console)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The reporting subsystem uses the template method pattern to allow different output formats
(e.g. Console and HTML). The overall structure of reports is always the same:</p>
</div>
<div class="paragraph">
<p>Graphical clients can use the API of the reporting subsystem to display
reports in arbitrary formats.</p>
</div>
<div class="paragraph">
<p>The (generic and abstract) reporting is implemented in the abstract Reporter class
as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">/**
 * main entry point for reporting - to be called when a report is requested
 * Uses template-method to delegate concrete implementations to subclasses
*/</span>
    <span class="directive">public</span> <span class="type">void</span> reportFindings() {
        initReport()            <i class="conum" data-value="1"></i><b>(1)</b>
        reportOverallSummary()  <i class="conum" data-value="2"></i><b>(2)</b>
        reportAllPages()        <i class="conum" data-value="3"></i><b>(3)</b>
        closeReport()           <i class="conum" data-value="4"></i><b>(4)</b>
    }
<span class="comment">//</span>
    <span class="directive">private</span> <span class="type">void</span> reportAllPages() {
        pageResults.each { pageResult -&gt;
            reportPageSummary( pageResult ) <i class="conum" data-value="5"></i><b>(5)</b>
            pageResult.singleCheckResults.each { resultForOneCheck -&gt;
               reportSingleCheckSummary( resultForOneCheck )  <i class="conum" data-value="6"></i><b>(6)</b>
               reportSingleCheckDetails( resultForOneCheck )  <i class="conum" data-value="7"></i><b>(7)</b>
               reportPageFooter()                             <i class="conum" data-value="8"></i><b>(8)</b>
        }
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>initialize the report, e.g. create and open the file, copy css-, javascript and image files.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>create the overall summary, with the overall success percentage and a list of all checked pages with their success rate.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>iterate over all pages</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>write report footer - in HTML report also create back-to-top-link</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>for a single page, report the nr of checks and problems plus the success rate</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>for every singleCheck on that page, report a summary and</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>all detailed findings for a singleCheck.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>for every checked page, create a footer, page break or similar to graphically distinguish
pages between each other.</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_styling_the_reporting_output"><a class="anchor" href="#_styling_the_reporting_output"></a>8.5.1. Styling the Reporting Output</h4>
<div class="ulist">
<ul>
<li>
<p>The <code>HtmlReporter</code> explicitly generates css classes together with the html elements,
based upon css styling re-used from the Gradle JUnit plugin.</p>
</li>
<li>
<p>Stylesheets, a minimized version of jQuery javascript library plus some icons
are copied at report-generation time from the jar-file to the report output directory.</p>
</li>
<li>
<p>Styling the back-to-top arrow/button is done as a combination of JavaScript plus some css styling, as described in <a href="http://www.webtipblog.com/adding-scroll-top-button-website/" class="bare">http://www.webtipblog.com/adding-scroll-top-button-website/</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_copy_required_resources_to_output_directory"><a class="anchor" href="#_copy_required_resources_to_output_directory"></a>8.5.2. Copy Required Resources to Output Directory</h4>
<div class="paragraph">
<p>When creating the HTML report, we need to copy the required resource files (css, JavaScript)
to the output directory.</p>
</div>
<div class="paragraph">
<p>The appropriate copy method was re-used from the <a href="https://github.com/gradle/gradle/blob/master/subprojects/performance/src/testFixtures/groovy/org/gradle/performance/results/ReportGenerator.java#L50-50">Gradle sources</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_attributions"><a class="anchor" href="#_attributions"></a>8.5.3. Attributions</h4>
<div class="paragraph">
<p>Credits for the arrow-icon <a href="https://www.iconfinder.com/icons/118743/arrow_up_icon" class="bare">https://www.iconfinder.com/icons/118743/arrow_up_icon</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_design_decisions"><a class="anchor" href="#_design_decisions"></a>9. Design Decisions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_checking_of_external_links_postponed"><a class="anchor" href="#_checking_of_external_links_postponed"></a>9.1. Checking of external links postponed</h3>
<div class="paragraph">
<p>In the current {revision} we won&#8217;t check external links.
These checks have been postponed to later versions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_html_parsing_with_jsoup"><a class="anchor" href="#_html_parsing_with_jsoup"></a>9.2. HTML Parsing with jsoup</h3>
<div class="paragraph">
<p>To check HTML we parse it into an internal (DOM-like) representation.
For this task we use <a href="http://jsoup.org">jsoup HTML parser</a>, an open-source parser without
external dependencies.</p>
</div>
<div class="paragraph">
<p>To quote from the jsoup website:</p>
</div>
<div class="quoteblock">
<blockquote>
jsoup is a Java library for working with real-world HTML.
It provides a very convenient API for extracting and manipulating data,
using the best of DOM, CSS, and jQuery-like methods.
</blockquote>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Goals of this decision</dt>
<dd>
<p>Check HTML programmatically by using an existing API that provides access and finder
methods to the DOM-tree of the file(s) to be checked.</p>
</dd>
<dt class="hdlist1">Decision Criteria</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>few dependencies, so the <kbd>HtmlSC</kbd> binary stays as small as possible.</p>
</li>
<li>
<p>accessor and finder methods to find images, links and link-targets within the DOM tree.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Alternatives</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>HTTPUnit: a testing framework for web applications and -sites. Its main focus is web testing and it suffers from a large number of dependencies.</p>
</li>
<li>
<p>jsoup: a plain HTML parser without any dependencies (!) and a rich API to access all HTML elements in DOM-like syntax.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Find details on how <kbd>HtmlSC</kbd> implements HTML parsing in the
<a href="#html-encapsulation">HTML encapsulation concept</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_string_similarity_checking_with_a_href_http_wikipedia_org_wiki_jaro_e2_80_93winkler_distance_jaro_winkler_distance_a"><a class="anchor" href="#_string_similarity_checking_with_a_href_http_wikipedia_org_wiki_jaro_e2_80_93winkler_distance_jaro_winkler_distance_a"></a>9.3. String Similarity Checking with <a href="http://wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance">Jaro-Winkler-Distance</a></h3>
<div class="paragraph">
<p>The small <a href="https://github.com/rrice/java-string-similarity">java-string-similarity</a> library (by Ralph Allen Rice) contains implementations of several similarity-calculation algorithms. As it is <strong>not available</strong> as public binary,
we use the sources instead, primarily:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>net.ricecode.similarity.JaroWinklerStrategyTest
net.ricecode.similarity.JaroWinklerStrategy</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The actual implementation of the similarity comparison has been postponed
to a later release of <kbd>HtmlSC</kbd>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_glossary"><a class="anchor" href="#_glossary"></a>10. Glossary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See the <a href="#_html_checking_domain_model">domain model</a> for explanations of important terms.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-07-09 15:16:43 MESZ
</div>
</div>
</body>
</html>